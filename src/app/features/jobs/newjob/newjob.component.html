<div class="row">
  <div class="col-lg-12">
    <div class="card">
      <form action="#" (ngSubmit)="createPoll()" [formGroup]="pollForm">
        <div class="card-header">
          <h5 class="card-title mb-0">Create Poll</h5>
        </div>
        <div class="card-body">
          <div class="row g-4">
            <div class="col-lg-6">
              <div>
                <label for="job-title-Input" class="form-label">Question<span
                  class="text-danger">*</span></label>
                <input type="text" class="form-control" id="job-title-Input"
                       placeholder="The best employee of the month" required formControlName="question"
                />
                <div class="invalid-feedback">Please, enter the question.</div>
              </div>
            </div>

            <div class="col-lg-6">
              <div>
                <label for="job-position-Input" class="form-label">Poll thumbnail <span
                  class="text-danger">*</span></label>
                <input type="text" class="form-control" id="job-position-Input"
                       placeholder="https://images.unsplash.com/photo-1..." required formControlName="thumbnail"
                />
                <div class="invalid-feedback">Please, select the thumbnail</div>
              </div>
            </div>

            <div class="col-lg-12">
              <div>
                <label for="description-field" class="form-label">Description <span
                  class="text-danger">*</span></label>
                <textarea class="form-control" id="description-field" rows="3"
                          placeholder="The best employee of the month will be awarded with a bonus of ..."
                          required formControlName="description"></textarea>
                <div class="invalid-feedback">Please, enter the Description.</div>
              </div>
            </div>

            <div class="col-lg-12">
              <div class="d-flex justify-content-between">
                <label class="form-label">Options</label>
              </div>

              <div formArrayName="options" class="d-flex flex-column gap-2 mb-2">
                @for (option of pollForm.value.options;track $index) {
                  <div class="d-flex gap-2">
                    @if ($sentiments()[$index];as mood) {
                      <span class="badge d-flex align-items-center bg-{{mood | getMoodStyle}} ms-1">{{ mood | getMoodIcon }}</span>
                    }

                    <input type="text" class="form-control"
                           placeholder="Option {{ $index + 1 }}"
                           [formControlName]="$index"
                    />

                    <button (click)="deleteOption($index)" type="button" class="btn text-nowrap btn-ghost-danger">
                      Delete
                    </button>
                  </div>
                }
              </div>

              <div class="d-flex gap-2">
                <input type="text" class="form-control"
                       (keydown.enter)="createOption($event)"
                       placeholder="Create a new option"
                       [formControl]="newOption"
                />

                <button
                  [class.disabled]="newOption.invalid" type="button" class="btn text-nowrap btn-ghost-secondary">
                  Add option
                </button>
              </div>

            </div>

            <div class="col-lg-12">
              <div class="hstack justify-content-end gap-2">
                <button (click)="calculateSentiments()" type="button" class="btn btn-ghost-secondary"><i
                  class="ri-close-line align-bottom"></i> Assume sentiments
                </button>

                <button [class.disabled]="pollForm.invalid" type="submit" class="btn btn-primary">Create Poll ðŸš€</button>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
